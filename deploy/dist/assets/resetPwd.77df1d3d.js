import{b as P}from"./user.ade60e5e.js";import{A as g,r as $,d as n,o as b,j as V,w as a,e as s,f as r,m as w,s as x}from"./index.89a73f00.js";const h={__name:"resetPwd",setup(y){const{proxy:u}=x(),e=g({oldPassword:void 0,newPassword:void 0,confirmPassword:void 0}),i=$({oldPassword:[{required:!0,message:"\u65E7\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],newPassword:[{required:!0,message:"\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{min:8,max:30,message:"\u7528\u6237\u5BC6\u7801\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 8 \u548C 30 \u4E4B\u95F4",trigger:"blur"},{pattern:/^(?![a-zA-Z]+$)(?![A-Z0-9]+$)(?![A-Z\W_!@#$%^&*`~()-+=]+$)(?![a-z0-9]+$)(?![a-z\W_!@#$%^&*`~()-+=]+$)(?![0-9\W_!@#$%^&*`~()-+=]+$)[a-zA-Z0-9\W_!@#$%^&*`~()-+=]{8,30}$/,message:"\u5BC6\u7801\u4E3A\u6570\u5B57\uFF0C\u5C0F\u5199\u5B57\u6BCD\uFF0C\u5927\u5199\u5B57\u6BCD\uFF0C\u7279\u6B8A\u7B26\u53F7 \u81F3\u5C11\u5305\u542B\u4E09\u79CD\uFF0C\u957F\u5EA6\u4E3A 8 - 30\u4F4D"}],confirmPassword:[{required:!0,message:"\u786E\u8BA4\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{required:!0,validator:(m,o,l)=>{e.newPassword!==o?l(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")):l()},trigger:"blur"}]});function f(){u.$refs.pwdRef.validate(m=>{m&&P(e.oldPassword,e.newPassword).then(o=>{u.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F")})})}function c(){u.$tab.closePage()}return(m,o)=>{const l=n("el-input"),t=n("el-form-item"),p=n("el-button"),_=n("el-form");return b(),V(_,{ref:"pwdRef",model:r(e),rules:r(i),"label-width":"80px"},{default:a(()=>[s(t,{label:"\u65E7\u5BC6\u7801",prop:"oldPassword"},{default:a(()=>[s(l,{modelValue:r(e).oldPassword,"onUpdate:modelValue":o[0]||(o[0]=d=>r(e).oldPassword=d),placeholder:"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(t,{label:"\u65B0\u5BC6\u7801",prop:"newPassword"},{default:a(()=>[s(l,{modelValue:r(e).newPassword,"onUpdate:modelValue":o[1]||(o[1]=d=>r(e).newPassword=d),placeholder:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(t,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"confirmPassword"},{default:a(()=>[s(l,{modelValue:r(e).confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=d=>r(e).confirmPassword=d),placeholder:"\u8BF7\u786E\u8BA4\u65B0\u5BC6\u7801",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),s(t,null,{default:a(()=>[s(p,{type:"primary",onClick:f},{default:a(()=>[w("\u4FDD\u5B58")]),_:1}),s(p,{type:"danger",onClick:c},{default:a(()=>[w("\u5173\u95ED")]),_:1})]),_:1})]),_:1},8,["model","rules"])}}};export{h as default};
