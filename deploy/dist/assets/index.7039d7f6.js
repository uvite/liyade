import{H as y,z as te,r,A as le,B as ae,d as i,C as F,o as v,c as ne,D as _,F as E,f as a,e as t,w as e,i as oe,m as d,j as h,G as K,k as ie,s as pe}from"./index.42013f3f.js";function ue(p){return y({url:"/app/ip/list",method:"get",params:p})}function se(p){return y({url:"/app/ip/"+p,method:"get"})}function re(p){return y({url:"/app/ip",method:"post",data:p})}function de(p){return y({url:"/app/ip",method:"put",data:p})}function ce(p){return y({url:"/app/ip/"+p,method:"delete"})}const me={class:"app-container"},fe={class:"dialog-footer"},_e=te({name:"Ip"}),he=Object.assign(_e,{setup(p){const{proxy:c}=pe(),$=r([]),m=r(!1),x=r(!0),w=r(!0),S=r([]),P=r(!0),B=r(!0),V=r(0),D=r(""),Q=le({form:{},queryParams:{pageNum:1,pageSize:10,ip:null},rules:{}}),{queryParams:u,form:f,rules:T}=ae(Q);function g(){x.value=!0,ue(u.value).then(n=>{$.value=n.rows,V.value=n.total,x.value=!1})}function j(){m.value=!1,R()}function R(){f.value={id:null,ip:null},c.resetForm("ipRef")}function I(){u.value.pageNum=1,g()}function A(){c.resetForm("queryRef"),I()}function L(n){S.value=n.map(l=>l.id),P.value=n.length!=1,B.value=!n.length}function G(){R(),m.value=!0,D.value="\u6DFB\u52A0ip\u767D\u540D\u5355"}function H(n){R();const l=n.id||S.value;se(l).then(C=>{f.value=C.data,m.value=!0,D.value="\u4FEE\u6539ip\u767D\u540D\u5355"})}function O(){c.$refs.ipRef.validate(n=>{n&&(f.value.id!=null?de(f.value).then(l=>{c.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),m.value=!1,g()}):re(f.value).then(l=>{c.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),m.value=!1,g()}))})}function q(n){const l=n.id||S.value;c.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664ip\u767D\u540D\u5355\u7F16\u53F7\u4E3A"'+l+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return ce(l)}).then(()=>{g(),c.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}function J(){c.download("app/ip/export",{...u.value},`ip_${new Date().getTime()}.xlsx`)}return g(),(n,l)=>{const C=i("el-input"),N=i("el-form-item"),s=i("el-button"),z=i("el-form"),k=i("el-col"),M=i("right-toolbar"),W=i("el-row"),U=i("el-table-column"),X=i("el-table"),Y=i("pagination"),Z=i("el-dialog"),b=F("hasPermi"),ee=F("loading");return v(),ne("div",me,[_(t(z,{model:a(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:e(()=>[t(N,{label:"ip",prop:"ip"},{default:e(()=>[t(C,{modelValue:a(u).ip,"onUpdate:modelValue":l[0]||(l[0]=o=>a(u).ip=o),placeholder:"\u8BF7\u8F93\u5165ip",clearable:"",onKeyup:oe(I,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(N,null,{default:e(()=>[t(s,{type:"primary",icon:"Search",onClick:I},{default:e(()=>[d("\u641C\u7D22")]),_:1}),t(s,{icon:"Refresh",onClick:A},{default:e(()=>[d("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[E,a(w)]]),t(W,{gutter:10,class:"mb8"},{default:e(()=>[t(k,{span:1.5},{default:e(()=>[_((v(),h(s,{type:"primary",plain:"",icon:"Plus",onClick:G},{default:e(()=>[d("\u65B0\u589E")]),_:1})),[[b,["app:ip:add"]]])]),_:1},8,["span"]),t(k,{span:1.5},{default:e(()=>[_((v(),h(s,{type:"success",plain:"",icon:"Edit",disabled:a(P),onClick:H},{default:e(()=>[d("\u4FEE\u6539")]),_:1},8,["disabled"])),[[b,["app:ip:edit"]]])]),_:1},8,["span"]),t(k,{span:1.5},{default:e(()=>[_((v(),h(s,{type:"danger",plain:"",icon:"Delete",disabled:a(B),onClick:q},{default:e(()=>[d("\u5220\u9664")]),_:1},8,["disabled"])),[[b,["app:ip:remove"]]])]),_:1},8,["span"]),t(k,{span:1.5},{default:e(()=>[_((v(),h(s,{type:"warning",plain:"",icon:"Download",onClick:J},{default:e(()=>[d("\u5BFC\u51FA")]),_:1})),[[b,["app:ip:export"]]])]),_:1},8,["span"]),t(M,{showSearch:a(w),"onUpdate:showSearch":l[1]||(l[1]=o=>K(w)?w.value=o:null),onQueryTable:g},null,8,["showSearch"])]),_:1}),_((v(),h(X,{data:a($),onSelectionChange:L},{default:e(()=>[t(U,{type:"selection",width:"55",align:"center"}),t(U,{label:"ip",align:"center",prop:"ip"}),t(U,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:e(o=>[_((v(),h(s,{link:"",type:"primary",icon:"Delete",onClick:ge=>q(o.row)},{default:e(()=>[d("\u5220\u9664")]),_:2},1032,["onClick"])),[[b,["app:ip:remove"]]])]),_:1})]),_:1},8,["data"])),[[ee,a(x)]]),_(t(Y,{total:a(V),page:a(u).pageNum,"onUpdate:page":l[2]||(l[2]=o=>a(u).pageNum=o),limit:a(u).pageSize,"onUpdate:limit":l[3]||(l[3]=o=>a(u).pageSize=o),onPagination:g},null,8,["total","page","limit"]),[[E,a(V)>0]]),t(Z,{title:a(D),modelValue:a(m),"onUpdate:modelValue":l[5]||(l[5]=o=>K(m)?m.value=o:null),width:"500px","append-to-body":""},{footer:e(()=>[ie("div",fe,[t(s,{type:"primary",onClick:O},{default:e(()=>[d("\u786E \u5B9A")]),_:1}),t(s,{onClick:j},{default:e(()=>[d("\u53D6 \u6D88")]),_:1})])]),default:e(()=>[t(z,{ref:"ipRef",model:a(f),rules:a(T),"label-width":"80px"},{default:e(()=>[t(N,{label:"ip",prop:"ip"},{default:e(()=>[t(C,{modelValue:a(f).ip,"onUpdate:modelValue":l[4]||(l[4]=o=>a(f).ip=o),placeholder:"\u8BF7\u8F93\u5165ip"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{he as default};
