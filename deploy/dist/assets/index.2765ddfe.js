import{H as D,z as me,u as ce,r as s,A as fe,B as _e,d as p,C as T,o as j,c as be,D as y,F as q,f as a,e,w as o,i as k,m as c,G as E,j as K,k as ve,x as z,s as Ve}from"./index.9a8d5b64.js";import"./lodash.5c7b0403.js";function ge(f){return D({url:"/app/license/list",method:"get",params:f})}function he(f){return D({url:"/app/license/"+f,method:"get"})}function we(f){return D({url:"/app/license",method:"post",data:f})}function ye(f){return D({url:"/app/license",method:"put",data:f})}const Ue={class:"app-container"},Se={class:"dialog-footer"},je=me({name:"Licenses"}),Ne=Object.assign(je,{setup(f){const F=ce(),{proxy:v}=Ve(),L=s([]),V=s([]),g=s(!1),N=s(!0),U=s(!0),Q=s([]),x=s([]),O=s(!0),G=s(!0),C=s(0),H=s(""),S=s(!1),J=fe({form:{},queryParams:{pageNum:1,pageSize:10,licenseId:null,fileName:null,limitStart:null,limitEnd:null,projectName:null,projectUsername:null,projectMobile:null},rules:{}}),{queryParams:u,form:n,rules:R}=_e(J);function h(){N.value=!0,ge(u.value).then(d=>{L.value=d.rows,C.value=d.total,N.value=!1})}function W(){g.value=!1,X()}function X(){n.value={id:null,licenseId:null,fileName:null,limitStart:null,limitEnd:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,projectName:null,projectUsername:null,projectMobile:null},V.value=[],v.resetForm("licensesRef")}function w(){u.value.pageNum=1,h()}function Z(){v.resetForm("queryRef"),w()}function ee(d){Q.value=d.map(l=>l.id),O.value=d.length!=1,G.value=!d.length}function le(d){const l=d.id;F.push("/license/detail?licenseId="+l)}function te(d){he(d.id).then(l=>{n.value=l.data,S.value=!0})}function ae(){v.$refs.licensesRef.validate(d=>{d&&(n.value.appDevicesStatusList=V.value,n.value.id!=null?ye(n.value).then(l=>{v.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),g.value=!1,h()}):we(n.value).then(l=>{v.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),g.value=!1,h()}))})}function oe({row:d,rowIndex:l}){d.index=l+1}function ne(){let d={};d.deviceId="",d.used="",d.enabled="",V.value.push(d)}function de(){if(x.value.length==0)v.$modal.msgError("\u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u6388\u6743\u7BA1\u7406\u6570\u636E");else{const d=V.value,l=x.value;V.value=d.filter(function(i){return l.indexOf(i.index)==-1})}}function ue(d){x.value=d.map(l=>l.index)}return h(),(d,l)=>{const i=p("el-input"),r=p("el-form-item"),_=p("el-button"),I=p("el-form"),M=p("el-col"),ie=p("right-toolbar"),A=p("el-row"),m=p("el-table-column"),Y=p("el-table"),re=p("pagination"),B=p("el-date-picker"),pe=p("el-divider"),P=p("el-dialog"),$=T("hasPermi"),se=T("loading");return j(),be("div",Ue,[y(e(I,{model:a(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(r,{label:"license",prop:"licenseId"},{default:o(()=>[e(i,{modelValue:a(u).licenseId,"onUpdate:modelValue":l[0]||(l[0]=t=>a(u).licenseId=t),placeholder:"\u8BF7\u8F93\u5165license",clearable:"",onKeyup:k(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u9879\u76EE\u540D\u79F0",prop:"projectName"},{default:o(()=>[e(i,{modelValue:a(u).projectName,"onUpdate:modelValue":l[1]||(l[1]=t=>a(u).projectName=t),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",clearable:"",onKeyup:k(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA",prop:"projectUsername"},{default:o(()=>[e(i,{modelValue:a(u).projectUsername,"onUpdate:modelValue":l[2]||(l[2]=t=>a(u).projectUsername=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u59D3\u540D",clearable:"",onKeyup:k(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u7535\u8BDD",prop:"projectMobile"},{default:o(()=>[e(i,{modelValue:a(u).projectMobile,"onUpdate:modelValue":l[3]||(l[3]=t=>a(u).projectMobile=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u7535\u8BDD",clearable:"",onKeyup:k(w,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,null,{default:o(()=>[e(_,{type:"primary",icon:"Search",onClick:w},{default:o(()=>[c("\u641C\u7D22")]),_:1}),e(_,{icon:"Refresh",onClick:Z},{default:o(()=>[c("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[q,a(U)]]),e(A,{gutter:10,class:"mb8"},{default:o(()=>[e(M,{span:3}),e(ie,{showSearch:a(U),"onUpdate:showSearch":l[4]||(l[4]=t=>E(U)?U.value=t:null),onQueryTable:h},null,8,["showSearch"])]),_:1}),y((j(),K(Y,{data:a(L),onSelectionChange:ee},{default:o(()=>[e(m,{label:"license",align:"center",prop:"licenseId"}),e(m,{label:"\u9879\u76EE\u540D\u79F0",align:"center",width:"150",prop:"projectName"}),e(m,{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",align:"center",width:"100",prop:"projectUsername"}),e(m,{label:"\u8054\u7CFB\u4EBA\u7535\u8BDD",align:"center",width:"110",prop:"projectMobile"}),e(m,{label:"\u7533\u8BF7\u65F6\u95F4",align:"center",width:"160",prop:"createTime"}),e(m,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(t=>[y((j(),K(_,{link:"",type:"primary",icon:"Edit",onClick:b=>le(t.row)},{default:o(()=>[c("\u8BBE\u5907\u660E\u7EC6 ")]),_:2},1032,["onClick"])),[[$,["app:licenses:edit"]]]),y((j(),K(_,{link:"",type:"primary",icon:"Edit",onClick:b=>te(t.row)},{default:o(()=>[c("\u6388\u6743\u660E\u7EC6 ")]),_:2},1032,["onClick"])),[[$,["app:licenses:list"]]])]),_:1})]),_:1},8,["data"])),[[se,a(N)]]),y(e(re,{total:a(C),page:a(u).pageNum,"onUpdate:page":l[5]||(l[5]=t=>a(u).pageNum=t),limit:a(u).pageSize,"onUpdate:limit":l[6]||(l[6]=t=>a(u).pageSize=t),onPagination:h},null,8,["total","page","limit"]),[[q,a(C)>0]]),e(P,{title:a(H),modelValue:a(g),"onUpdate:modelValue":l[15]||(l[15]=t=>E(g)?g.value=t:null),width:"500px","append-to-body":""},{footer:o(()=>[ve("div",Se,[e(_,{type:"primary",onClick:ae},{default:o(()=>[c("\u786E \u5B9A")]),_:1}),e(_,{onClick:W},{default:o(()=>[c("\u53D6 \u6D88")]),_:1})])]),default:o(()=>[e(I,{ref:"licensesRef",model:a(n),rules:a(R),"label-width":"80px"},{default:o(()=>[e(r,{label:"license",prop:"licenseId"},{default:o(()=>[e(i,{modelValue:a(n).licenseId,"onUpdate:modelValue":l[7]||(l[7]=t=>a(n).licenseId=t),placeholder:"\u8BF7\u8F93\u5165license"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u4E0B\u8F7D\u6587\u4EF6\u540D\u79F0",prop:"fileName"},{default:o(()=>[e(i,{modelValue:a(n).fileName,"onUpdate:modelValue":l[8]||(l[8]=t=>a(n).fileName=t),placeholder:"\u8BF7\u8F93\u5165\u4E0B\u8F7D\u6587\u4EF6\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"limitStart"},{default:o(()=>[e(B,{clearable:"",modelValue:a(n).limitStart,"onUpdate:modelValue":l[9]||(l[9]=t=>a(n).limitStart=t),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u66F4\u65B0\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"limitEnd"},{default:o(()=>[e(B,{clearable:"",modelValue:a(n).limitEnd,"onUpdate:modelValue":l[10]||(l[10]=t=>a(n).limitEnd=t),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u66F4\u65B0\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[e(i,{modelValue:a(n).remark,"onUpdate:modelValue":l[11]||(l[11]=t=>a(n).remark=t),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u9879\u76EE\u540D\u79F0",prop:"projectName"},{default:o(()=>[e(i,{modelValue:a(n).projectName,"onUpdate:modelValue":l[12]||(l[12]=t=>a(n).projectName=t),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"projectUsername"},{default:o(()=>[e(i,{modelValue:a(n).projectUsername,"onUpdate:modelValue":l[13]||(l[13]=t=>a(n).projectUsername=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA\u7535\u8BDD",prop:"projectMobile"},{default:o(()=>[e(i,{modelValue:a(n).projectMobile,"onUpdate:modelValue":l[14]||(l[14]=t=>a(n).projectMobile=t),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),e(pe,{"content-position":"center"},{default:o(()=>[c("\u6388\u6743\u7BA1\u7406\u4FE1\u606F")]),_:1}),e(A,{gutter:10,class:"mb8"},{default:o(()=>[e(M,{span:1.5},{default:o(()=>[e(_,{type:"primary",icon:"Plus",onClick:ne},{default:o(()=>[c("\u6DFB\u52A0")]),_:1})]),_:1},8,["span"]),e(M,{span:1.5},{default:o(()=>[e(_,{type:"danger",icon:"Delete",onClick:de},{default:o(()=>[c("\u5220\u9664")]),_:1})]),_:1},8,["span"])]),_:1}),e(Y,{data:a(V),"row-class-name":oe,onSelectionChange:ue,ref:"appDevicesStatus"},{default:o(()=>[e(m,{type:"selection",width:"50",align:"center"}),e(m,{label:"\u5E8F\u53F7",align:"center",prop:"index",width:"50"}),e(m,{label:"\u8BBE\u5907id",prop:"deviceId",width:"150"},{default:o(t=>[e(i,{modelValue:t.row.deviceId,"onUpdate:modelValue":b=>t.row.deviceId=b,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{label:"\u662F\u5426\u4F7F\u7528",prop:"used",width:"150"},{default:o(t=>[e(i,{modelValue:t.row.used,"onUpdate:modelValue":b=>t.row.used=b,placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(m,{label:"\u72B6\u6001",prop:"enabled",width:"150"},{default:o(t=>[e(i,{modelValue:t.row.enabled,"onUpdate:modelValue":b=>t.row.enabled=b,placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),e(P,{title:"\u6388\u6743\u4FE1\u606F",modelValue:a(S),"onUpdate:modelValue":l[16]||(l[16]=t=>E(S)?S.value=t:null),width:"400px","append-to-body":""},{default:o(()=>[e(I,{model:a(n),rules:a(R),"label-width":"130px"},{default:o(()=>[e(r,{label:"\u5BC6\u7801\uFF1A"},{default:o(()=>[c(z(a(n).password),1)]),_:1}),e(r,{label:"\u5230\u671F\u65E5\u671F\uFF1A"},{default:o(()=>[c(z(a(n).limitEnd),1)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{Ne as default};
