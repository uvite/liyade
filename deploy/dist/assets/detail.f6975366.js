import{H as V,z as ae,a as ne,r as c,A as oe,B as ue,d,C as B,o as k,c as de,D as C,F as E,f as t,e,w as n,i as x,m as h,j as P,G as z,k as se,s as ie}from"./index.f3c749fc.js";function re(r){return V({url:"/app/status/list",method:"get",params:r})}function ce(r){return V({url:"/app/status",method:"post",data:r})}function pe(r){return V({url:"/app/status",method:"put",data:r})}function me(r,s){return V({url:"/app/status/changeEnabled",method:"put",data:{id:r,enabled:s}})}function fe(r){return V({url:"/app/status/batchcheck/"+r,method:"post"})}const _e={class:"app-container"},be={class:"dialog-footer"},ve=ae({name:"Status"}),he=Object.assign(ve,{setup(r){const{proxy:s}=ie(),y=ne(),R=c([]),f=c(!1),I=c(!0),S=c(!0),$=c([]),D=c(!0),q=c(!0),U=c(0),F=c(""),Q=oe({form:{},queryParams:{pageNum:1,pageSize:10,deviceId:null,used:null,enabled:null},rules:{}}),{queryParams:u,form:i,rules:j}=ue(Q);function p(){I.value=!0,re(u.value).then(o=>{R.value=o.rows,U.value=o.total,I.value=!1})}function L(){f.value=!1,T()}function T(){i.value={id:null,deviceId:null,used:null,enabled:null,licenseId:null},s.resetForm("statusRef")}function b(){u.value.pageNum=1,p()}function A(){s.resetForm("queryRef"),b()}function G(o){$.value=o.map(l=>l.id),D.value=o.length!=1,q.value=!o.length}function H(){s.$refs.statusRef.validate(o=>{o&&(i.value.id!=null?pe(i.value).then(l=>{s.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),f.value=!1,p()}):ce(i.value).then(l=>{s.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),f.value=!1,p()}))})}function O(o){const l=o.id||$.value;s.$modal.confirm('\u662F\u5426\u786E\u8BA4\u6279\u91CF\u5BA1\u6838"'+l.length+'"\u6761\u6570\u636E\u9879\uFF1F').then(function(){return fe(l)}).then(()=>{p(),s.$modal.msgSuccess("\u6279\u91CF\u5BA1\u6838\u6210\u529F")}).catch(()=>{})}function J(o){let l=o.enabled==="1"?"\u5BA1\u6838":"\u53CD\u5BA1";s.$modal.confirm('\u786E\u8BA4\u8981"'+l+'""'+o.deviceId+'"\u8BBE\u5907?').then(function(){return me(o.id,o.enabled)}).then(()=>{s.$modal.msgSuccess(l+"\u6210\u529F")}).catch(function(){o.enabled=o.enabled==="0"?"1":"0"})}return u.value.licenseId=y.query&&y.query.licenseId,console.log(y.query),p(),(o,l)=>{const _=d("el-input"),m=d("el-form-item"),v=d("el-button"),K=d("el-form"),M=d("el-col"),W=d("right-toolbar"),X=d("el-row"),g=d("el-table-column"),N=d("el-switch"),Y=d("el-table"),Z=d("pagination"),ee=d("el-dialog"),le=B("hasPermi"),te=B("loading");return k(),de("div",_e,[C(e(K,{model:t(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[e(m,{label:"\u8BBE\u5907id",prop:"deviceId"},{default:n(()=>[e(_,{modelValue:t(u).deviceId,"onUpdate:modelValue":l[0]||(l[0]=a=>t(u).deviceId=a),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"\u662F\u5426\u4F7F\u7528",prop:"used"},{default:n(()=>[e(_,{modelValue:t(u).used,"onUpdate:modelValue":l[1]||(l[1]=a=>t(u).used=a),placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"\u72B6\u6001",prop:"enabled"},{default:n(()=>[e(_,{modelValue:t(u).enabled,"onUpdate:modelValue":l[2]||(l[2]=a=>t(u).enabled=a),placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,null,{default:n(()=>[e(v,{type:"primary",icon:"Search",onClick:b},{default:n(()=>[h("\u641C\u7D22")]),_:1}),e(v,{icon:"Refresh",onClick:A},{default:n(()=>[h("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[E,t(S)]]),e(X,{gutter:10,class:"mb8"},{default:n(()=>[e(M,{span:1.5},{default:n(()=>[C((k(),P(v,{type:"danger",plain:"",icon:"Delete",disabled:t(q),onClick:O},{default:n(()=>[h("\u6279\u91CF\u5BA1\u6838")]),_:1},8,["disabled"])),[[le,["app:status:remove"]]])]),_:1},8,["span"]),e(W,{showSearch:t(S),"onUpdate:showSearch":l[3]||(l[3]=a=>z(S)?S.value=a:null),onQueryTable:p},null,8,["showSearch"])]),_:1}),C((k(),P(Y,{data:t(R),onSelectionChange:G},{default:n(()=>[e(g,{type:"selection",width:"55",align:"center"}),e(g,{label:"id",align:"center",prop:"id"}),e(g,{label:"\u8BBE\u5907id",align:"center",prop:"deviceId"}),e(g,{label:"\u662F\u5426\u4F7F\u7528",align:"center"},{default:n(a=>[e(N,{modelValue:a.row.used,"onUpdate:modelValue":w=>a.row.used=w,"active-value":"1","inactive-value":"0",disabled:"true"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(g,{label:"\u662F\u5426\u5BA1\u6838",align:"center"},{default:n(a=>[e(N,{modelValue:a.row.enabled,"onUpdate:modelValue":w=>a.row.enabled=w,"active-value":"1","inactive-value":"0",onChange:w=>J(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])),[[te,t(I)]]),C(e(Z,{total:t(U),page:t(u).pageNum,"onUpdate:page":l[4]||(l[4]=a=>t(u).pageNum=a),limit:t(u).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>t(u).pageSize=a),onPagination:p},null,8,["total","page","limit"]),[[E,t(U)>0]]),e(ee,{title:t(F),modelValue:t(f),"onUpdate:modelValue":l[9]||(l[9]=a=>z(f)?f.value=a:null),width:"500px","append-to-body":""},{footer:n(()=>[se("div",be,[e(v,{type:"primary",onClick:H},{default:n(()=>[h("\u786E \u5B9A")]),_:1}),e(v,{onClick:L},{default:n(()=>[h("\u53D6 \u6D88")]),_:1})])]),default:n(()=>[e(K,{ref:"statusRef",model:t(i),rules:t(j),"label-width":"80px"},{default:n(()=>[e(m,{label:"\u8BBE\u5907id",prop:"deviceId"},{default:n(()=>[e(_,{modelValue:t(i).deviceId,"onUpdate:modelValue":l[6]||(l[6]=a=>t(i).deviceId=a),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u662F\u5426\u4F7F\u7528",prop:"used"},{default:n(()=>[e(_,{modelValue:t(i).used,"onUpdate:modelValue":l[7]||(l[7]=a=>t(i).used=a),placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u72B6\u6001",prop:"enabled"},{default:n(()=>[e(_,{modelValue:t(i).enabled,"onUpdate:modelValue":l[8]||(l[8]=a=>t(i).enabled=a),placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{he as default};
