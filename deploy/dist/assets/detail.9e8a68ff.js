import{H as y,z as ae,a as ne,r as c,A as oe,B as ue,d,C as E,o as k,c as de,D as h,F as P,f as t,e,w as n,i as x,m as V,j as z,G as D,k as se,s as ie}from"./index.89a73f00.js";function re(r){return y({url:"/app/status/list",method:"get",params:r})}function ce(r){return y({url:"/app/status",method:"post",data:r})}function pe(r){return y({url:"/app/status",method:"put",data:r})}function me(r,s){return y({url:"/app/status/changeEnabled",method:"put",data:{id:r,enabled:s}})}function fe(r){return y({url:"/app/status/batchcheck/"+r,method:"post"})}const _e={class:"app-container"},be={class:"dialog-footer"},ve=ae({name:"Status"}),he=Object.assign(ve,{setup(r){const{proxy:s}=ie(),S=ne(),R=c([]),f=c(!1),I=c(!0),w=c(!0),$=c([]),F=c(!0),q=c(!0),U=c(0),Q=c(""),j=oe({form:{},queryParams:{pageNum:1,pageSize:10,deviceId:null,used:null,enabled:null},rules:{}}),{queryParams:u,form:i,rules:L}=ue(j);function p(){I.value=!0,re(u.value).then(o=>{R.value=o.rows,U.value=o.total,I.value=!1})}function T(){f.value=!1,A()}function A(){i.value={id:null,deviceId:null,used:null,enabled:null,licenseId:null},s.resetForm("statusRef")}function b(){u.value.pageNum=1,p()}function G(){s.resetForm("queryRef"),b()}function H(o){$.value=o.map(l=>l.id),F.value=o.length!=1,q.value=!o.length}function O(){s.$refs.statusRef.validate(o=>{o&&(i.value.id!=null?pe(i.value).then(l=>{s.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),f.value=!1,p()}):ce(i.value).then(l=>{s.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),f.value=!1,p()}))})}function J(o){const l=o.id||$.value;s.$modal.confirm('\u662F\u5426\u786E\u8BA4\u6279\u91CF\u5BA1\u6838"'+l.length+'"\u6761\u6570\u636E\u9879\uFF1F').then(function(){return fe(l)}).then(()=>{p(),s.$modal.msgSuccess("\u6279\u91CF\u5BA1\u6838\u6210\u529F")}).catch(()=>{})}function M(o){let l=o.enabled==="1"?"\u5BA1\u6838":"\u53CD\u5BA1";s.$modal.confirm('\u786E\u8BA4\u8981"'+l+'""'+o.deviceId+'"\u8BBE\u5907?').then(function(){return me(o.id,o.enabled)}).then(()=>{s.$modal.msgSuccess(l+"\u6210\u529F")}).catch(function(){o.enabled=o.enabled==="0"?"1":"0"})}return u.value.licenseId=S.query&&S.query.licenseId,console.log(S.query),p(),(o,l)=>{const _=d("el-input"),m=d("el-form-item"),v=d("el-button"),K=d("el-form"),W=d("el-col"),X=d("right-toolbar"),Y=d("el-row"),g=d("el-table-column"),N=d("el-switch"),Z=d("el-table"),ee=d("pagination"),le=d("el-dialog"),B=E("hasPermi"),te=E("loading");return k(),de("div",_e,[h(e(K,{model:t(u),ref:"queryRef",inline:!0,"label-width":"68px"},{default:n(()=>[e(m,{label:"\u8BBE\u5907id",prop:"deviceId"},{default:n(()=>[e(_,{modelValue:t(u).deviceId,"onUpdate:modelValue":l[0]||(l[0]=a=>t(u).deviceId=a),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"\u662F\u5426\u4F7F\u7528",prop:"used"},{default:n(()=>[e(_,{modelValue:t(u).used,"onUpdate:modelValue":l[1]||(l[1]=a=>t(u).used=a),placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,{label:"\u72B6\u6001",prop:"enabled"},{default:n(()=>[e(_,{modelValue:t(u).enabled,"onUpdate:modelValue":l[2]||(l[2]=a=>t(u).enabled=a),placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001",clearable:"",onKeyup:x(b,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(m,null,{default:n(()=>[e(v,{type:"primary",icon:"Search",onClick:b},{default:n(()=>[V("\u641C\u7D22")]),_:1}),e(v,{icon:"Refresh",onClick:G},{default:n(()=>[V("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[P,t(w)]]),e(Y,{gutter:10,class:"mb8"},{default:n(()=>[e(W,{span:1.5},{default:n(()=>[h((k(),z(v,{type:"danger",plain:"",icon:"Delete",disabled:t(q),onClick:J},{default:n(()=>[V("\u6279\u91CF\u5BA1\u6838")]),_:1},8,["disabled"])),[[B,["app:status:batchedit"]]])]),_:1},8,["span"]),e(X,{showSearch:t(w),"onUpdate:showSearch":l[3]||(l[3]=a=>D(w)?w.value=a:null),onQueryTable:p},null,8,["showSearch"])]),_:1}),h((k(),z(Z,{data:t(R),onSelectionChange:H},{default:n(()=>[e(g,{type:"selection",width:"55",align:"center"}),e(g,{label:"id",align:"center",prop:"id"}),e(g,{label:"\u8BBE\u5907id",align:"center",prop:"deviceId"}),e(g,{label:"\u662F\u5426\u4F7F\u7528",align:"center"},{default:n(a=>[e(N,{modelValue:a.row.used,"onUpdate:modelValue":C=>a.row.used=C,"active-value":"1","inactive-value":"0",disabled:"true"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(g,{label:"\u662F\u5426\u5BA1\u6838",align:"center"},{default:n(a=>[h(e(N,{modelValue:a.row.enabled,"onUpdate:modelValue":C=>a.row.enabled=C,"active-value":"1","inactive-value":"0",onChange:C=>M(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[B,["app:status:edit"]]])]),_:1})]),_:1},8,["data"])),[[te,t(I)]]),h(e(ee,{total:t(U),page:t(u).pageNum,"onUpdate:page":l[4]||(l[4]=a=>t(u).pageNum=a),limit:t(u).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>t(u).pageSize=a),onPagination:p},null,8,["total","page","limit"]),[[P,t(U)>0]]),e(le,{title:t(Q),modelValue:t(f),"onUpdate:modelValue":l[9]||(l[9]=a=>D(f)?f.value=a:null),width:"500px","append-to-body":""},{footer:n(()=>[se("div",be,[e(v,{type:"primary",onClick:O},{default:n(()=>[V("\u786E \u5B9A")]),_:1}),e(v,{onClick:T},{default:n(()=>[V("\u53D6 \u6D88")]),_:1})])]),default:n(()=>[e(K,{ref:"statusRef",model:t(i),rules:t(L),"label-width":"80px"},{default:n(()=>[e(m,{label:"\u8BBE\u5907id",prop:"deviceId"},{default:n(()=>[e(_,{modelValue:t(i).deviceId,"onUpdate:modelValue":l[6]||(l[6]=a=>t(i).deviceId=a),placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u662F\u5426\u4F7F\u7528",prop:"used"},{default:n(()=>[e(_,{modelValue:t(i).used,"onUpdate:modelValue":l[7]||(l[7]=a=>t(i).used=a),placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u72B6\u6001",prop:"enabled"},{default:n(()=>[e(_,{modelValue:t(i).enabled,"onUpdate:modelValue":l[8]||(l[8]=a=>t(i).enabled=a),placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{he as default};
