import{A as D,z as de,u as ie,r as c,B as re,C as pe,d as p,D as R,o as N,c as se,F as j,G as A,f as t,e,w as o,i as U,m,j as E,k as ce,H as me,s as fe}from"./index.7720242c.js";function _e(_){return D({url:"/app/licenses/list",method:"get",params:_})}function ve(_){return D({url:"/app/licenses",method:"post",data:_})}function Ve(_){return D({url:"/app/licenses",method:"put",data:_})}const be={class:"app-container"},ge={class:"dialog-footer"},ye=de({name:"Licenses"}),je=Object.assign(ye,{setup(_){const L=ie(),{proxy:v}=fe(),x=c([]),V=c([]),b=c(!1),w=c(!0),Y=c(!0),B=c([]),S=c([]),P=c(!0),$=c(!0),k=c(0),q=c(""),z=re({form:{},queryParams:{pageNum:1,pageSize:10,licenseId:null,fileName:null,limitStart:null,limitEnd:null,projectName:null,projectUsername:null,projectMobile:null},rules:{}}),{queryParams:d,form:n,rules:F}=pe(z);function h(){w.value=!0,_e(d.value).then(u=>{x.value=u.rows,k.value=u.total,w.value=!1})}function T(){b.value=!1,O()}function O(){n.value={id:null,licenseId:null,fileName:null,limitStart:null,limitEnd:null,createBy:null,createTime:null,updateBy:null,updateTime:null,remark:null,projectName:null,projectUsername:null,projectMobile:null},V.value=[],v.resetForm("licensesRef")}function g(){d.value.pageNum=1,h()}function Q(){v.resetForm("queryRef"),g()}function G(u){B.value=u.map(l=>l.id),P.value=u.length!=1,$.value=!u.length}function H(u){const l=u.id;L.push("/app/license-data/index/"+l)}function J(){v.$refs.licensesRef.validate(u=>{u&&(n.value.appDevicesStatusList=V.value,n.value.id!=null?Ve(n.value).then(l=>{v.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),b.value=!1,h()}):ve(n.value).then(l=>{v.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),b.value=!1,h()}))})}function W({row:u,rowIndex:l}){u.index=l+1}function X(){let u={};u.deviceId="",u.used="",u.enabled="",V.value.push(u)}function Z(){if(S.value.length==0)v.$modal.msgError("\u8BF7\u5148\u9009\u62E9\u8981\u5220\u9664\u7684\u6388\u6743\u7BA1\u7406\u6570\u636E");else{const u=V.value,l=S.value;V.value=u.filter(function(i){return l.indexOf(i.index)==-1})}}function ee(u){S.value=u.map(l=>l.index)}return h(),(u,l)=>{const i=p("el-input"),r=p("el-form-item"),f=p("el-button"),C=p("el-form"),s=p("el-table-column"),I=p("el-table"),le=p("pagination"),M=p("el-date-picker"),ae=p("el-divider"),K=p("el-col"),te=p("el-row"),oe=p("el-dialog"),ne=R("hasPermi"),ue=R("loading");return N(),se("div",be,[j(e(C,{model:t(d),ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(r,{label:"license",prop:"licenseId"},{default:o(()=>[e(i,{modelValue:t(d).licenseId,"onUpdate:modelValue":l[0]||(l[0]=a=>t(d).licenseId=a),placeholder:"\u8BF7\u8F93\u5165license",clearable:"",onKeyup:U(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u9879\u76EE\u540D\u79F0",prop:"projectName"},{default:o(()=>[e(i,{modelValue:t(d).projectName,"onUpdate:modelValue":l[1]||(l[1]=a=>t(d).projectName=a),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0",clearable:"",onKeyup:U(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA",prop:"projectUsername"},{default:o(()=>[e(i,{modelValue:t(d).projectUsername,"onUpdate:modelValue":l[2]||(l[2]=a=>t(d).projectUsername=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u59D3\u540D",clearable:"",onKeyup:U(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,{label:"\u7535\u8BDD",prop:"projectMobile"},{default:o(()=>[e(i,{modelValue:t(d).projectMobile,"onUpdate:modelValue":l[3]||(l[3]=a=>t(d).projectMobile=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u7535\u8BDD",clearable:"",onKeyup:U(g,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(r,null,{default:o(()=>[e(f,{type:"primary",icon:"Search",onClick:g},{default:o(()=>[m("\u641C\u7D22")]),_:1}),e(f,{icon:"Refresh",onClick:Q},{default:o(()=>[m("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[A,t(Y)]]),j((N(),E(I,{data:t(x),onSelectionChange:G},{default:o(()=>[e(s,{type:"selection",width:"55",align:"center"}),e(s,{label:"license",align:"center",prop:"licenseId"}),e(s,{label:"\u9879\u76EE\u540D\u79F0",align:"center",prop:"projectName"}),e(s,{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",align:"center",prop:"projectUsername"}),e(s,{label:"\u8054\u7CFB\u4EBA\u7535\u8BDD",align:"center",prop:"projectMobile"}),e(s,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(a=>[j((N(),E(f,{link:"",type:"primary",icon:"Edit",onClick:y=>H(a.row)},{default:o(()=>[m("\u8BBE\u5907\u660E\u7EC6 ")]),_:2},1032,["onClick"])),[[ne,["app:licenses:edit"]]])]),_:1})]),_:1},8,["data"])),[[ue,t(w)]]),j(e(le,{total:t(k),page:t(d).pageNum,"onUpdate:page":l[4]||(l[4]=a=>t(d).pageNum=a),limit:t(d).pageSize,"onUpdate:limit":l[5]||(l[5]=a=>t(d).pageSize=a),onPagination:h},null,8,["total","page","limit"]),[[A,t(k)>0]]),e(oe,{title:t(q),modelValue:t(b),"onUpdate:modelValue":l[14]||(l[14]=a=>me(b)?b.value=a:null),width:"500px","append-to-body":""},{footer:o(()=>[ce("div",ge,[e(f,{type:"primary",onClick:J},{default:o(()=>[m("\u786E \u5B9A")]),_:1}),e(f,{onClick:T},{default:o(()=>[m("\u53D6 \u6D88")]),_:1})])]),default:o(()=>[e(C,{ref:"licensesRef",model:t(n),rules:t(F),"label-width":"80px"},{default:o(()=>[e(r,{label:"license",prop:"licenseId"},{default:o(()=>[e(i,{modelValue:t(n).licenseId,"onUpdate:modelValue":l[6]||(l[6]=a=>t(n).licenseId=a),placeholder:"\u8BF7\u8F93\u5165license"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u4E0B\u8F7D\u6587\u4EF6\u540D\u79F0",prop:"fileName"},{default:o(()=>[e(i,{modelValue:t(n).fileName,"onUpdate:modelValue":l[7]||(l[7]=a=>t(n).fileName=a),placeholder:"\u8BF7\u8F93\u5165\u4E0B\u8F7D\u6587\u4EF6\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"limitStart"},{default:o(()=>[e(M,{clearable:"",modelValue:t(n).limitStart,"onUpdate:modelValue":l[8]||(l[8]=a=>t(n).limitStart=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u66F4\u65B0\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"limitEnd"},{default:o(()=>[e(M,{clearable:"",modelValue:t(n).limitEnd,"onUpdate:modelValue":l[9]||(l[9]=a=>t(n).limitEnd=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"\u8BF7\u9009\u62E9\u66F4\u65B0\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[e(i,{modelValue:t(n).remark,"onUpdate:modelValue":l[10]||(l[10]=a=>t(n).remark=a),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u9879\u76EE\u540D\u79F0",prop:"projectName"},{default:o(()=>[e(i,{modelValue:t(n).projectName,"onUpdate:modelValue":l[11]||(l[11]=a=>t(n).projectName=a),placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA\u59D3\u540D",prop:"projectUsername"},{default:o(()=>[e(i,{modelValue:t(n).projectUsername,"onUpdate:modelValue":l[12]||(l[12]=a=>t(n).projectUsername=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),e(r,{label:"\u8054\u7CFB\u4EBA\u7535\u8BDD",prop:"projectMobile"},{default:o(()=>[e(i,{modelValue:t(n).projectMobile,"onUpdate:modelValue":l[13]||(l[13]=a=>t(n).projectMobile=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u4EBA\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),e(ae,{"content-position":"center"},{default:o(()=>[m("\u6388\u6743\u7BA1\u7406\u4FE1\u606F")]),_:1}),e(te,{gutter:10,class:"mb8"},{default:o(()=>[e(K,{span:1.5},{default:o(()=>[e(f,{type:"primary",icon:"Plus",onClick:X},{default:o(()=>[m("\u6DFB\u52A0")]),_:1})]),_:1},8,["span"]),e(K,{span:1.5},{default:o(()=>[e(f,{type:"danger",icon:"Delete",onClick:Z},{default:o(()=>[m("\u5220\u9664")]),_:1})]),_:1},8,["span"])]),_:1}),e(I,{data:t(V),"row-class-name":W,onSelectionChange:ee,ref:"appDevicesStatus"},{default:o(()=>[e(s,{type:"selection",width:"50",align:"center"}),e(s,{label:"\u5E8F\u53F7",align:"center",prop:"index",width:"50"}),e(s,{label:"\u8BBE\u5907id",prop:"deviceId",width:"150"},{default:o(a=>[e(i,{modelValue:a.row.deviceId,"onUpdate:modelValue":y=>a.row.deviceId=y,placeholder:"\u8BF7\u8F93\u5165\u8BBE\u5907id"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u662F\u5426\u4F7F\u7528",prop:"used",width:"150"},{default:o(a=>[e(i,{modelValue:a.row.used,"onUpdate:modelValue":y=>a.row.used=y,placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u4F7F\u7528"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"\u72B6\u6001",prop:"enabled",width:"150"},{default:o(a=>[e(i,{modelValue:a.row.enabled,"onUpdate:modelValue":y=>a.row.enabled=y,placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{je as default};
